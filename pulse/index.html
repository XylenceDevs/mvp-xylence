<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Xylence Startup Assessment | AI-Powered Analysis</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <style>
      /* ============================================
           XYLENCE DESIGN SYSTEM
        ============================================ */
      :root {
        --future-dust: #1e293b;
        --electric-teal: #14b8a6;
        --neural-gray: #e2e8f0;
        --xylence-purple: #8b5cf6;
        --success-green: #10b981;
        --warning-orange: #fb923c;
        --deep-space: #0f172a;
        --light-canvas: #fafbfc;

        /* Extended palette */
        --glass-white: rgba(255, 255, 255, 0.05);
        --glass-border: rgba(255, 255, 255, 0.1);
        --text-primary: #f1f5f9;
        --text-secondary: #94a3b8;
        --text-dim: #64748b;

        /* Gradients */
        --gradient-xylence: linear-gradient(
          135deg,
          var(--xylence-purple),
          var(--electric-teal)
        );
        --gradient-glow: linear-gradient(
          135deg,
          rgba(139, 92, 246, 0.2),
          rgba(20, 184, 166, 0.2)
        );
        --gradient-dark: linear-gradient(180deg, var(--deep-space), #0a0e1a);

        /* Effects */
        --glow-teal: 0 0 40px rgba(20, 184, 166, 0.6);
        --glow-purple: 0 0 40px rgba(139, 92, 246, 0.6);
        --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Inter', sans-serif;
        background: var(--deep-space);
        color: var(--neural-gray);
        line-height: 1.6;
        position: relative;
        min-height: 100vh;
        overflow-x: hidden;
      }

      /* Xylence background effects */
      body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(
            circle at 20% 50%,
            rgba(139, 92, 246, 0.1) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 80% 80%,
            rgba(20, 184, 166, 0.1) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 50% 10%,
            rgba(139, 92, 246, 0.05) 0%,
            transparent 40%
          );
        pointer-events: none;
        z-index: 0;
        animation: xylenceShift 20s ease-in-out infinite;
      }

      @keyframes xylenceShift {
        0%,
        100% {
          transform: rotate(0deg) scale(1);
        }
        50% {
          transform: rotate(180deg) scale(1.1);
        }
      }

      /* Particle effect */
      .particles {
        position: fixed;
        width: 100%;
        height: 100%;
        overflow: hidden;
        z-index: 0;
        pointer-events: none;
      }

      .particle {
        position: absolute;
        width: 2px;
        height: 2px;
        background: var(--electric-teal);
        border-radius: 50%;
        animation: float 20s linear infinite;
        opacity: 0.5;
      }

      @keyframes float {
        from {
          transform: translateY(100vh) translateX(0);
          opacity: 0;
        }
        10% {
          opacity: 0.5;
        }
        90% {
          opacity: 0.5;
        }
        to {
          transform: translateY(-100vh) translateX(100px);
          opacity: 0;
        }
      }

      /* Glass morphism container */
      .glass {
        background: rgba(30, 41, 59, 0.4);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: var(--glass-shadow);
      }

      /* ============================================
           HEADER
        ============================================ */
      .header {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 1000;
        padding: 1.5rem 0;
        background: rgba(15, 23, 42, 0.8);
        backdrop-filter: blur(20px);
        border-bottom: 1px solid var(--glass-border);
      }

      .header-content {
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 2rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .logo-container {
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .logo-mark {
        width: 40px;
        height: 40px;
        background: var(--gradient-xylence);
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        animation: pulse 2s ease-in-out infinite;
        box-shadow: var(--glow-purple);
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
          box-shadow: 0 0 20px rgba(139, 92, 246, 0.4);
        }
        50% {
          transform: scale(1.05);
          box-shadow: 0 0 30px rgba(139, 92, 246, 0.6);
        }
      }

      .logo-text {
        font-size: 1.25rem;
        font-weight: 700;
        background: var(--gradient-xylence);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        letter-spacing: -0.5px;
      }

      .header-nav {
        display: flex;
        gap: 1rem;
        align-items: center;
      }

      .ai-status {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem 1rem;
        background: var(--glass-white);
        border: 1px solid var(--glass-border);
        border-radius: 100px;
        font-size: 0.875rem;
        color: var(--electric-teal);
      }

      .ai-status-dot {
        width: 8px;
        height: 8px;
        background: var(--electric-teal);
        border-radius: 50%;
        animation: aiPulse 2s ease-in-out infinite;
      }

      @keyframes aiPulse {
        0%,
        100% {
          opacity: 1;
          box-shadow: 0 0 5px var(--electric-teal);
        }
        50% {
          opacity: 0.5;
          box-shadow: 0 0 10px var(--electric-teal);
        }
      }

      /* ============================================
           MAIN CONTAINER
        ============================================ */
      .main-container {
        position: relative;
        z-index: 1;
        max-width: 1200px;
        margin: 0 auto;
        padding: 8rem 2rem 4rem;
        min-height: 100vh;
      }

      /* Xylence Progress Ring */
      .xylence-progress {
        margin-bottom: 3rem;
        position: relative;
      }

      .progress-ring {
        width: 150px;
        height: 150px;
        margin: 0 auto 2rem;
        position: relative;
      }

      .progress-ring svg {
        transform: rotate(-90deg);
        width: 100%;
        height: 100%;
      }

      .progress-ring-bg {
        fill: none;
        stroke: var(--future-dust);
        stroke-width: 8;
      }

      .progress-ring-fill {
        fill: none;
        stroke: url(#xylenceGradient);
        stroke-width: 8;
        stroke-linecap: round;
        transition: stroke-dashoffset 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        filter: drop-shadow(0 0 10px rgba(20, 184, 166, 0.5));
      }

      .progress-percentage {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 2rem;
        font-weight: 700;
        background: var(--gradient-xylence);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      /* Step indicators */
      .step-indicators {
        display: flex;
        justify-content: space-between;
        max-width: 600px;
        margin: 0 auto 3rem;
        position: relative;
      }

      .step-line {
        position: absolute;
        top: 20px;
        left: 0;
        right: 0;
        height: 2px;
        background: var(--future-dust);
        z-index: 0;
      }

      .step-line-progress {
        position: absolute;
        top: 0;
        left: 0;
        height: 100%;
        background: var(--gradient-xylence);
        transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 0 20px rgba(20, 184, 166, 0.5);
      }

      .step {
        position: relative;
        z-index: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .step-circle {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: var(--deep-space);
        border: 2px solid var(--future-dust);
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        font-size: 0.875rem;
        transition: all 0.3s ease;
        position: relative;
      }

      .step.active .step-circle {
        background: var(--gradient-xylence);
        border-color: transparent;
        color: white;
        box-shadow: var(--glow-teal);
        animation: stepPulse 2s ease-in-out infinite;
      }

      @keyframes stepPulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
      }

      .step.completed .step-circle {
        background: var(--success-green);
        border-color: var(--success-green);
        color: white;
      }

      .step.completed .step-circle::after {
        content: '✓';
        position: absolute;
        font-size: 1.2rem;
      }

      .step-label {
        margin-top: 0.5rem;
        font-size: 0.75rem;
        color: var(--text-dim);
        text-align: center;
        max-width: 80px;
      }

      .step.active .step-label,
      .step.completed .step-label {
        color: var(--text-secondary);
      }

      /* ============================================
           FORM CARD
        ============================================ */
      .form-card {
        background: rgba(30, 41, 59, 0.3);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 24px;
        padding: 3rem;
        box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.2),
          inset 0 1px 0 0 rgba(255, 255, 255, 0.05);
        position: relative;
        overflow: hidden;
      }

      .form-card::before {
        content: '';
        position: absolute;
        top: -50%;
        right: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(
          circle,
          rgba(139, 92, 246, 0.1) 0%,
          transparent 70%
        );
        animation: rotate 30s linear infinite;
        pointer-events: none;
      }

      @keyframes rotate {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      .form-section {
        display: none;
        animation: fadeInUp 0.6s ease;
        position: relative;
        z-index: 1;
      }

      .form-section.active {
        display: block;
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Section headers */
      .section-header {
        margin-bottom: 2.5rem;
        text-align: center;
      }

      .section-icon {
        width: 60px;
        height: 60px;
        margin: 0 auto 1rem;
        background: var(--gradient-xylence);
        border-radius: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        box-shadow: 0 10px 30px rgba(139, 92, 246, 0.3);
      }

      .section-title {
        font-size: 2rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
        background: var(--gradient-xylence);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        letter-spacing: -1px;
      }

      .section-subtitle {
        color: var(--text-secondary);
        font-size: 1rem;
        line-height: 1.6;
      }

      /* ============================================
           FORM ELEMENTS
        ============================================ */
      .form-group {
        margin-bottom: 1.75rem;
        position: relative;
      }

      .form-label {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 0.75rem;
        color: var(--text-primary);
        font-weight: 500;
        font-size: 0.95rem;
        letter-spacing: -0.01em;
      }

      .required {
        color: var(--electric-teal);
        font-size: 0.875rem;
      }

      .optional-chip {
        background: rgba(148, 163, 184, 0.1);
        color: var(--text-dim);
        padding: 2px 8px;
        border-radius: 100px;
        font-size: 0.75rem;
        font-weight: 400;
      }

      .form-input,
      .form-select,
      .form-textarea {
        width: 100%;
        padding: 1rem 1.25rem;
        background: rgba(15, 23, 42, 0.5);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 12px;
        color: var(--text-primary);
        font-size: 1rem;
        font-family: 'Inter', sans-serif;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .form-input:hover,
      .form-select:hover,
      .form-textarea:hover {
        border-color: rgba(20, 184, 166, 0.3);
        background: rgba(15, 23, 42, 0.7);
      }

      .form-input:focus,
      .form-select:focus,
      .form-textarea:focus {
        outline: none;
        border-color: var(--electric-teal);
        background: rgba(15, 23, 42, 0.8);
        box-shadow: 0 0 0 3px rgba(20, 184, 166, 0.1);
      }

      .form-textarea {
        resize: vertical;
        min-height: 120px;
        line-height: 1.5;
      }

      /* Input with icon */
      .input-with-icon {
        position: relative;
      }

      .input-icon {
        position: absolute;
        left: 1rem;
        top: 50%;
        transform: translateY(-50%);
        color: var(--text-dim);
        pointer-events: none;
      }

      .input-with-icon .form-input {
        padding-left: 2.75rem;
      }

      /* Character counter */
      .char-counter {
        position: absolute;
        bottom: -20px;
        right: 0;
        font-size: 0.75rem;
        color: var(--text-dim);
      }

      .char-counter.warning {
        color: var(--warning-orange);
      }

      /* ============================================
           QUANTUM UPLOAD AREA
        ============================================ */
      .quantum-upload {
        border: 2px dashed rgba(20, 184, 166, 0.3);
        border-radius: 16px;
        padding: 2.5rem;
        text-align: center;
        transition: all 0.3s ease;
        cursor: pointer;
        position: relative;
        background: rgba(20, 184, 166, 0.02);
        overflow: hidden;
      }

      .quantum-upload::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          45deg,
          transparent 30%,
          rgba(20, 184, 166, 0.1) 50%,
          transparent 70%
        );
        transform: translateX(-100%);
        transition: transform 0.6s;
      }

      .quantum-upload:hover::before {
        transform: translateX(100%);
      }

      .quantum-upload:hover {
        border-color: var(--electric-teal);
        background: rgba(20, 184, 166, 0.05);
        box-shadow: 0 10px 40px rgba(20, 184, 166, 0.1);
      }

      .quantum-upload.dragover {
        border-color: var(--xylence-purple);
        background: rgba(139, 92, 246, 0.05);
        box-shadow: 0 10px 40px rgba(139, 92, 246, 0.2);
      }

      .upload-icon {
        font-size: 3rem;
        margin-bottom: 1rem;
        animation: floatIcon 3s ease-in-out infinite;
      }

      @keyframes floatIcon {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-10px);
        }
      }

      .upload-title {
        font-size: 1.125rem;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 0.5rem;
      }

      .upload-subtitle {
        color: var(--text-dim);
        font-size: 0.875rem;
      }

      .file-input {
        display: none;
      }

      /* Uploaded file display */
      .uploaded-file {
        display: flex;
        align-items: center;
        justify-content: space-between;
        background: rgba(20, 184, 166, 0.05);
        border: 1px solid rgba(20, 184, 166, 0.2);
        padding: 1rem 1.25rem;
        border-radius: 12px;
        margin-top: 1rem;
        animation: slideIn 0.3s ease;
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateX(-20px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      .file-info {
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .file-icon {
        width: 40px;
        height: 40px;
        background: var(--gradient-xylence);
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.25rem;
      }

      .file-details {
        text-align: left;
      }

      .file-name {
        color: var(--text-primary);
        font-weight: 500;
        margin-bottom: 0.25rem;
      }

      .file-meta {
        display: flex;
        gap: 1rem;
        font-size: 0.75rem;
        color: var(--text-dim);
      }

      .remove-file {
        background: transparent;
        border: 1px solid rgba(239, 68, 68, 0.3);
        color: #ef4444;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 0.875rem;
      }

      .remove-file:hover {
        background: rgba(239, 68, 68, 0.1);
        border-color: #ef4444;
      }

      /* ============================================
           VIDEO RECORDING
        ============================================ */
      .video-container {
        background: rgba(15, 23, 42, 0.5);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 16px;
        padding: 1.5rem;
        margin-top: 1rem;
      }

      .video-preview {
        width: 100%;
        max-width: 100%;
        border-radius: 12px;
        background: #000;
        display: none;
      }

      .video-controls {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 1rem;
        margin-top: 1.5rem;
      }

      .record-btn {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.875rem 1.75rem;
        background: linear-gradient(135deg, #dc2626, #ef4444);
        color: white;
        border: none;
        border-radius: 12px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 0.95rem;
      }

      .record-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 30px rgba(239, 68, 68, 0.3);
      }

      .record-btn.recording {
        background: linear-gradient(135deg, #7f1d1d, #dc2626);
        animation: recordPulse 1.5s ease-in-out infinite;
      }

      @keyframes recordPulse {
        0%,
        100% {
          box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.6);
        }
        50% {
          box-shadow: 0 0 0 10px rgba(239, 68, 68, 0);
        }
      }

      .timer {
        display: none;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem 1rem;
        background: rgba(239, 68, 68, 0.1);
        border: 1px solid rgba(239, 68, 68, 0.3);
        border-radius: 8px;
        color: #ef4444;
        font-weight: 500;
      }

      .timer-dot {
        width: 8px;
        height: 8px;
        background: #ef4444;
        border-radius: 50%;
        animation: blink 1s infinite;
      }

      @keyframes blink {
        50% {
          opacity: 0;
        }
      }

      /* ============================================
           AI ANALYSIS DISPLAY
        ============================================ */
      .ai-analysis {
        background: rgba(139, 92, 246, 0.05);
        border: 1px solid rgba(139, 92, 246, 0.2);
        border-radius: 12px;
        padding: 1.25rem;
        margin-top: 1rem;
        display: none;
      }

      .ai-analysis.active {
        display: block;
        animation: fadeIn 0.5s ease;
      }

      .ai-header {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 1rem;
        color: var(--xylence-purple);
        font-weight: 500;
      }

      .ai-insights {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
      }

      .insight-chip {
        background: rgba(139, 92, 246, 0.1);
        color: var(--text-secondary);
        padding: 0.375rem 0.75rem;
        border-radius: 100px;
        font-size: 0.75rem;
        border: 1px solid rgba(139, 92, 246, 0.2);
      }

      /* ============================================
           BUTTONS
        ============================================ */
      .form-actions {
        display: flex;
        justify-content: space-between;
        margin-top: 3rem;
        padding-top: 2rem;
        border-top: 1px solid rgba(255, 255, 255, 0.05);
      }

      .btn {
        padding: 0.875rem 1.75rem;
        border-radius: 12px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        border: none;
        font-size: 0.95rem;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        font-family: 'Inter', sans-serif;
        letter-spacing: -0.01em;
        position: relative;
        overflow: hidden;
      }

      .btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          45deg,
          transparent,
          rgba(255, 255, 255, 0.1),
          transparent
        );
        transform: translateX(-100%);
        transition: transform 0.6s;
      }

      .btn:hover::before {
        transform: translateX(100%);
      }

      .btn-primary {
        background: var(--gradient-xylence);
        color: white;
        box-shadow: 0 4px 15px rgba(20, 184, 166, 0.3);
      }

      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(20, 184, 166, 0.4);
      }

      .btn-secondary {
        background: rgba(30, 41, 59, 0.5);
        color: var(--text-primary);
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .btn-secondary:hover {
        background: rgba(30, 41, 59, 0.7);
        border-color: rgba(20, 184, 166, 0.3);
        transform: translateY(-2px);
      }

      .btn-ghost {
        background: transparent;
        color: var(--text-dim);
        text-decoration: underline;
        text-underline-offset: 4px;
        padding: 0.875rem 1rem;
      }

      .btn-ghost:hover {
        color: var(--text-secondary);
      }

      .btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none !important;
      }

      /* ============================================
           SCORE DISPLAY
        ============================================ */
      .score-display {
        text-align: center;
        padding: 3rem 0;
      }

      .score-orb {
        width: 250px;
        height: 250px;
        margin: 0 auto 2rem;
        position: relative;
      }

      .score-orb-bg {
        position: absolute;
        inset: 0;
        border-radius: 50%;
        background: conic-gradient(
          from 180deg,
          var(--xylence-purple) 0deg,
          var(--electric-teal) 120deg,
          var(--xylence-purple) 360deg
        );
        opacity: 0.1;
        animation: orbRotate 10s linear infinite;
      }

      @keyframes orbRotate {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      .score-orb-inner {
        position: absolute;
        inset: 10px;
        border-radius: 50%;
        background: var(--deep-space);
        border: 2px solid transparent;
        background-clip: padding-box;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }

      .score-value {
        font-size: 4rem;
        font-weight: 800;
        background: var(--gradient-xylence);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        line-height: 1;
        margin-bottom: 0.5rem;
      }

      .score-label {
        color: var(--text-dim);
        font-size: 0.875rem;
        text-transform: uppercase;
        letter-spacing: 0.1em;
      }

      .score-message {
        background: rgba(20, 184, 166, 0.1);
        border: 1px solid rgba(20, 184, 166, 0.3);
        color: var(--electric-teal);
        padding: 1.25rem;
        border-radius: 12px;
        margin: 2rem 0;
        font-size: 0.95rem;
        line-height: 1.6;
      }

      /* ============================================
           DATA VISUALIZATION
        ============================================ */
      .data-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
        margin: 2rem 0;
      }

      .data-card {
        background: rgba(30, 41, 59, 0.3);
        border: 1px solid rgba(255, 255, 255, 0.05);
        border-radius: 12px;
        padding: 1.25rem;
        text-align: center;
      }

      .data-value {
        font-size: 1.75rem;
        font-weight: 700;
        color: var(--electric-teal);
        margin-bottom: 0.25rem;
      }

      .data-label {
        color: var(--text-dim);
        font-size: 0.75rem;
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }

      /* ============================================
           NOTIFICATIONS
        ============================================ */
      .notification {
        position: fixed;
        top: 100px;
        right: 2rem;
        max-width: 400px;
        padding: 1rem 1.25rem;
        background: rgba(30, 41, 59, 0.9);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 12px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        display: flex;
        align-items: center;
        gap: 1rem;
        z-index: 2000;
        animation: slideInRight 0.3s ease;
        display: none;
      }

      .notification.show {
        display: flex;
      }

      @keyframes slideInRight {
        from {
          opacity: 0;
          transform: translateX(100%);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      .notification-icon {
        width: 40px;
        height: 40px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
      }

      .notification.success .notification-icon {
        background: rgba(16, 185, 129, 0.2);
        color: var(--success-green);
      }

      .notification.error .notification-icon {
        background: rgba(239, 68, 68, 0.2);
        color: #ef4444;
      }

      .notification.info .notification-icon {
        background: rgba(20, 184, 166, 0.2);
        color: var(--electric-teal);
      }

      .notification-content {
        flex: 1;
      }

      .notification-title {
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 0.25rem;
      }

      .notification-message {
        font-size: 0.875rem;
        color: var(--text-secondary);
      }

      /* ============================================
           LOADING STATES
        ============================================ */
      .loading-overlay {
        position: fixed;
        inset: 0;
        background: rgba(15, 23, 42, 0.9);
        backdrop-filter: blur(10px);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 3000;
      }

      .loading-overlay.active {
        display: flex;
      }

      .quantum-loader {
        position: relative;
        width: 100px;
        height: 100px;
      }

      .quantum-loader-ring {
        position: absolute;
        inset: 0;
        border-radius: 50%;
        border: 3px solid transparent;
        border-top-color: var(--electric-teal);
        animation: quantumSpin 1s cubic-bezier(0.4, 0, 0.2, 1) infinite;
      }

      .quantum-loader-ring:nth-child(2) {
        inset: 10px;
        border-top-color: var(--xylence-purple);
        animation-delay: 0.2s;
        animation-direction: reverse;
      }

      .quantum-loader-ring:nth-child(3) {
        inset: 20px;
        border-top-color: var(--electric-teal);
        animation-delay: 0.4s;
      }

      @keyframes quantumSpin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      .loading-text {
        position: absolute;
        bottom: -40px;
        left: 50%;
        transform: translateX(-50%);
        color: var(--text-secondary);
        font-size: 0.875rem;
        white-space: nowrap;
      }

      /* ============================================
           REGISTRATION MODAL
        ============================================ */
      .modal-overlay {
        position: fixed;
        inset: 0;
        background: rgba(15, 23, 42, 0.95);
        backdrop-filter: blur(20px);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 4000;
        padding: 2rem;
        animation: modalFadeIn 0.3s ease;
      }

      .modal-overlay.active {
        display: flex;
      }

      @keyframes modalFadeIn {
        from {
          opacity: 0;
          backdrop-filter: blur(0);
        }
        to {
          opacity: 1;
          backdrop-filter: blur(20px);
        }
      }

      .modal-container {
        background: rgba(30, 41, 59, 0.9);
        backdrop-filter: blur(40px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 24px;
        padding: 3rem;
        max-width: 500px;
        width: 100%;
        position: relative;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5),
          0 0 100px rgba(139, 92, 246, 0.1),
          inset 0 1px 0 0 rgba(255, 255, 255, 0.05);
        animation: modalSlideUp 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
      }

      @keyframes modalSlideUp {
        from {
          opacity: 0;
          transform: translateY(50px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      .modal-close {
        position: absolute;
        top: 1.5rem;
        right: 1.5rem;
        background: rgba(255, 255, 255, 0.1);
        border: none;
        width: 36px;
        height: 36px;
        border-radius: 50%;
        color: var(--text-secondary);
        font-size: 1.5rem;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10;
      }

      .modal-close:hover {
        background: rgba(239, 68, 68, 0.2);
        color: #ef4444;
        transform: rotate(90deg);
      }

      /* Success Animation */
      .modal-success-animation {
        margin-bottom: 2rem;
        display: flex;
        justify-content: center;
        position: relative;
      }

      .success-orb {
        position: relative;
        width: 100px;
        height: 100px;
      }

      .success-orb-inner {
        position: absolute;
        inset: 20px;
        background: var(--gradient-xylence);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        animation: successPulse 2s ease-in-out infinite;
      }

      @keyframes successPulse {
        0%,
        100% {
          transform: scale(1);
          box-shadow: 0 0 30px rgba(20, 184, 166, 0.5);
        }
        50% {
          transform: scale(1.1);
          box-shadow: 0 0 50px rgba(20, 184, 166, 0.8);
        }
      }

      .success-icon {
        font-size: 2rem;
        animation: bounce 1s ease infinite;
      }

      @keyframes bounce {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-5px);
        }
      }

      .success-rings {
        position: absolute;
        inset: 0;
        border: 2px solid var(--electric-teal);
        border-radius: 50%;
        opacity: 0.5;
        animation: ringExpand 2s ease-in-out infinite;
      }

      @keyframes ringExpand {
        0% {
          transform: scale(1);
          opacity: 0.5;
        }
        100% {
          transform: scale(1.5);
          opacity: 0;
        }
      }

      /* Modal Score */
      .modal-score {
        text-align: center;
        margin-bottom: 2rem;
      }

      .modal-score-title {
        font-size: 1rem;
        color: var(--text-secondary);
        margin-bottom: 0.5rem;
        text-transform: uppercase;
        letter-spacing: 0.1em;
      }

      .modal-score-value {
        font-size: 4rem;
        font-weight: 800;
        background: var(--gradient-xylence);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        line-height: 1;
        margin-bottom: 0.5rem;
        animation: countUp 1s ease-out;
      }

      @keyframes countUp {
        from {
          opacity: 0;
          transform: scale(0.5);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }

      .modal-score-badge {
        display: inline-block;
        background: rgba(20, 184, 166, 0.1);
        border: 1px solid rgba(20, 184, 166, 0.3);
        color: var(--electric-teal);
        padding: 0.375rem 1rem;
        border-radius: 100px;
        font-size: 0.875rem;
        font-weight: 500;
      }

      /* Modal Benefits */
      .modal-benefits {
        margin-bottom: 2rem;
      }

      .modal-subtitle {
        color: var(--text-primary);
        font-size: 1.125rem;
        margin-bottom: 1.5rem;
        text-align: center;
      }

      .modal-benefit-list {
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      .modal-benefit {
        display: flex;
        gap: 1rem;
        padding: 1rem;
        background: rgba(255, 255, 255, 0.02);
        border: 1px solid rgba(255, 255, 255, 0.05);
        border-radius: 12px;
        transition: all 0.3s ease;
      }

      .modal-benefit:hover {
        background: rgba(20, 184, 166, 0.05);
        border-color: rgba(20, 184, 166, 0.2);
        transform: translateX(5px);
      }

      .benefit-icon {
        font-size: 1.5rem;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(139, 92, 246, 0.1);
        border-radius: 10px;
        flex-shrink: 0;
      }

      .benefit-content {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
      }

      .benefit-content strong {
        color: var(--text-primary);
        font-weight: 600;
      }

      .benefit-detail {
        font-size: 0.875rem;
        color: var(--text-dim);
      }

      /* Preview Card */
      .modal-preview {
        margin-bottom: 2rem;
      }

      .preview-card {
        background: linear-gradient(
          135deg,
          rgba(139, 92, 246, 0.1),
          rgba(20, 184, 166, 0.1)
        );
        border: 1px solid rgba(20, 184, 166, 0.3);
        border-radius: 12px;
        padding: 1rem 1.25rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        animation: previewGlow 3s ease-in-out infinite;
      }

      @keyframes previewGlow {
        0%,
        100% {
          box-shadow: 0 0 20px rgba(20, 184, 166, 0.2);
        }
        50% {
          box-shadow: 0 0 30px rgba(20, 184, 166, 0.4);
        }
      }

      .preview-label {
        font-size: 0.875rem;
        color: var(--text-secondary);
      }

      .preview-content {
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        gap: 0.25rem;
      }

      .preview-content strong {
        color: var(--electric-teal);
        font-size: 1.125rem;
      }

      .compatibility-score {
        background: var(--gradient-xylence);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        font-weight: 600;
        font-size: 0.875rem;
      }

      /* Auth Buttons */
      .modal-actions {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }

      .auth-btn {
        width: 100%;
        padding: 0.875rem 1.5rem;
        border-radius: 12px;
        font-weight: 500;
        font-size: 0.95rem;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        border: none;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.75rem;
        font-family: 'Inter', sans-serif;
        position: relative;
        overflow: hidden;
      }

      .auth-google {
        background: white;
        color: #1a1a1a;
        border: 1px solid rgba(0, 0, 0, 0.1);
      }

      .auth-google:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 30px rgba(255, 255, 255, 0.2);
      }

      .auth-email {
        background: var(--gradient-xylence);
        color: white;
        box-shadow: 0 4px 15px rgba(20, 184, 166, 0.3);
      }

      .auth-email:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(20, 184, 166, 0.4);
      }

      .auth-skip {
        background: transparent;
        color: var(--text-dim);
        text-decoration: underline;
        text-underline-offset: 4px;
        padding: 0.5rem;
        font-size: 0.875rem;
      }

      .auth-skip:hover {
        color: var(--text-secondary);
      }

      .auth-icon {
        width: 20px;
        height: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .modal-divider {
        text-align: center;
        color: var(--text-dim);
        font-size: 0.875rem;
        margin: 0.5rem 0;
        position: relative;
      }

      .modal-divider span {
        background: rgba(30, 41, 59, 0.9);
        padding: 0 1rem;
        position: relative;
        z-index: 1;
      }

      .modal-divider::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 0;
        right: 0;
        height: 1px;
        background: rgba(255, 255, 255, 0.1);
      }

      /* Email Form */
      .email-form {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
        animation: slideDown 0.3s ease;
      }

      @keyframes slideDown {
        from {
          opacity: 0;
          max-height: 0;
        }
        to {
          opacity: 1;
          max-height: 200px;
        }
      }

      .modal-input {
        width: 100%;
        padding: 0.875rem 1rem;
        background: rgba(15, 23, 42, 0.5);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 12px;
        color: var(--text-primary);
        font-size: 1rem;
        transition: all 0.3s ease;
      }

      .modal-input:focus {
        outline: none;
        border-color: var(--electric-teal);
        background: rgba(15, 23, 42, 0.8);
        box-shadow: 0 0 0 3px rgba(20, 184, 166, 0.1);
      }

      .auth-submit {
        background: var(--gradient-xylence);
        color: white;
        box-shadow: 0 4px 15px rgba(20, 184, 166, 0.3);
      }

      .auth-submit:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(20, 184, 166, 0.4);
      }

      /* Trust Indicators */
      .modal-footer {
        margin-top: 2rem;
        padding-top: 1.5rem;
        border-top: 1px solid rgba(255, 255, 255, 0.05);
      }

      .trust-indicators {
        display: flex;
        justify-content: center;
        gap: 1.5rem;
        flex-wrap: wrap;
      }

      .trust-item {
        font-size: 0.75rem;
        color: var(--text-dim);
        display: flex;
        align-items: center;
        gap: 0.25rem;
      }

      /* Responsive Modal */
      @media (max-width: 640px) {
        .modal-container {
          padding: 2rem 1.5rem;
        }

        .modal-score-value {
          font-size: 3rem;
        }

        .trust-indicators {
          gap: 0.75rem;
        }
      }

      /* ============================================
           RESPONSIVE
        ============================================ */
      @media (max-width: 768px) {
        .main-container {
          padding: 7rem 1rem 3rem;
        }

        .form-card {
          padding: 2rem 1.5rem;
        }

        .section-title {
          font-size: 1.5rem;
        }

        .step-indicators {
          padding: 0 1rem;
        }

        .step-label {
          font-size: 0.625rem;
          max-width: 60px;
        }

        .form-actions {
          flex-direction: column;
          gap: 1rem;
        }

        .btn {
          width: 100%;
          justify-content: center;
        }

        .data-grid {
          grid-template-columns: 1fr;
        }

        .notification {
          right: 1rem;
          left: 1rem;
          max-width: none;
        }
      }

      /* ============================================
           ANIMATIONS
        ============================================ */
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      .fade-in {
        animation: fadeIn 0.5s ease;
      }

      .slide-up {
        animation: slideUp 0.5s ease;
      }

      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
    </style>
  </head>
  <body>
    <!-- Particle Effects -->
    <div class="particles" id="particles"></div>

    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <div class="logo-container">
          <div class="logo-mark">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path
                d="M12 2L2 7V17L12 22L22 17V7L12 2Z"
                stroke="white"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M12 22V12"
                stroke="white"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M12 12L2 7"
                stroke="white"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M12 12L22 7"
                stroke="white"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </div>
          <div class="logo-text">Xylence - Pulse</div>
        </div>
        <nav class="header-nav">
          <div class="ai-status">
            <div class="ai-status-dot"></div>
            <span>AI Processing Active</span>
          </div>
        </nav>
      </div>
    </header>

    <!-- Main Container -->
    <main class="main-container">
      <!-- Pulse Progress -->
      <div class="xylence-progress">
        <div class="progress-ring">
          <svg width="150" height="150">
            <defs>
              <linearGradient
                id="xylenceGradient"
                x1="0%"
                y1="0%"
                x2="100%"
                y2="100%"
              >
                <stop
                  offset="0%"
                  style="stop-color: #8b5cf6; stop-opacity: 1"
                />
                <stop
                  offset="100%"
                  style="stop-color: #14b8a6; stop-opacity: 1"
                />
              </linearGradient>
            </defs>
            <circle cx="75" cy="75" r="65" class="progress-ring-bg"></circle>
            <circle
              cx="75"
              cy="75"
              r="65"
              class="progress-ring-fill"
              id="progressRing"
              stroke-dasharray="408.4"
              stroke-dashoffset="408.4"
            ></circle>
          </svg>
          <div class="progress-percentage" id="progressPercentage">0%</div>
        </div>

        <!-- Step Indicators -->
        <div class="step-indicators">
          <div class="step-line">
            <div
              class="step-line-progress"
              id="stepProgress"
              style="width: 0%"
            ></div>
          </div>
          <div class="step active" data-step="1">
            <div class="step-circle">1</div>
            <div class="step-label">Quick Start</div>
          </div>
          <div class="step" data-step="2">
            <div class="step-circle">2</div>
            <div class="step-label">Core Info</div>
          </div>
          <div class="step" data-step="3">
            <div class="step-circle">3</div>
            <div class="step-label">Team DNA</div>
          </div>
          <div class="step" data-step="4">
            <div class="step-circle">4</div>
            <div class="step-label">Traction</div>
          </div>
          <div class="step" data-step="5">
            <div class="step-circle">5</div>
            <div class="step-label">Analysis</div>
          </div>
        </div>
      </div>

      <!-- Form Card -->
      <div class="form-card">
        <!-- Section 1: Quick Start -->
        <section class="form-section active" id="section-1">
          <div class="section-header">
            <div class="section-icon">🚀</div>
            <h1 class="section-title">Pulse Quick Start</h1>
            <p class="section-subtitle">
              Upload your materials for instant AI analysis
            </p>
          </div>

          <div class="form-group">
            <label class="form-label">
              Pitch Deck Upload
              <span class="optional-chip">Optional</span>
            </label>
            <div class="quantum-upload" id="deckUploadArea">
              <input
                type="file"
                id="deckInput"
                class="file-input"
                accept=".pdf,.ppt,.pptx"
              />
              <div class="upload-icon">📊</div>
              <div class="upload-title">Drop your pitch deck here</div>
              <div class="upload-subtitle">
                PDF, PPT, PPTX up to 20MB • Encrypted transfer
              </div>
            </div>
            <div id="deckFileDisplay"></div>
            <div class="ai-analysis" id="deckAnalysis"></div>
          </div>

          <div class="form-group">
            <label class="form-label">
              Video Pitch Recording
              <span class="optional-chip">2-5 minutes</span>
            </label>
            <div class="video-container">
              <video id="videoPreview" class="video-preview"></video>
              <div class="video-controls">
                <button class="record-btn" id="recordBtn">
                  <span id="recordIcon">🎥</span>
                  <span id="recordText">Start Recording</span>
                </button>
                <div class="timer" id="timer">
                  <div class="timer-dot"></div>
                  <span id="timerText">00:00</span>
                </div>
              </div>
            </div>
            <div class="ai-analysis" id="videoAnalysis"></div>
          </div>

          <div class="form-actions">
            <button class="btn btn-ghost" onclick="skipSection()">
              Skip for now
            </button>
            <button class="btn btn-primary" onclick="nextSection()">
              Continue <span>→</span>
            </button>
          </div>
        </section>

        <!-- Section 2: Core Information -->
        <section class="form-section" id="section-2">
          <div class="section-header">
            <div class="section-icon">💡</div>
            <h1 class="section-title">Core Information</h1>
            <p class="section-subtitle">Essential data for pulse analysis</p>
          </div>

          <div class="form-group">
            <label class="form-label">
              Startup Name <span class="required">*</span>
            </label>
            <div class="input-with-icon">
              <span class="input-icon">🏢</span>
              <input
                type="text"
                class="form-input"
                id="startupName"
                placeholder="Enter your startup name"
              />
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">
              Mission Statement
              <span class="optional-chip">140 chars</span>
            </label>
            <input
              type="text"
              class="form-input"
              id="tagline"
              placeholder="One line that defines your mission"
              maxlength="140"
            />
            <div class="char-counter">
              <span id="taglineCounter">0</span> / 140
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">
              Industry Vertical <span class="required">*</span>
            </label>
            <select class="form-select" id="industry">
              <option value="">Select your industry</option>
              <option value="ai_ml">AI/ML & Deep Tech</option>
              <option value="fintech">Fintech & DeFi</option>
              <option value="healthtech">HealthTech & BioTech</option>
              <option value="saas">Enterprise SaaS</option>
              <option value="marketplace">Marketplace & Commerce</option>
              <option value="web3">Web3 & Blockchain</option>
              <option value="climate">Climate Tech</option>
              <option value="other">Other</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">
              Development Stage <span class="required">*</span>
            </label>
            <select class="form-select" id="stage">
              <option value="">Select current stage</option>
              <option value="idea">Ideation</option>
              <option value="prototype">Prototype</option>
              <option value="mvp">MVP</option>
              <option value="beta">Beta Testing</option>
              <option value="launched">Launched</option>
              <option value="scaling">Scaling</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">
              Problem Statement
              <span class="optional-chip">Optional</span>
            </label>
            <textarea
              class="form-textarea"
              id="problem"
              placeholder="Describe the problem you're solving..."
            ></textarea>
          </div>

          <div class="form-actions">
            <button class="btn btn-secondary" onclick="previousSection()">
              <span>←</span> Previous
            </button>
            <button class="btn btn-primary" onclick="nextSection()">
              Continue <span>→</span>
            </button>
          </div>
        </section>

        <!-- Section 3: Team DNA -->
        <section class="form-section" id="section-3">
          <div class="section-header">
            <div class="section-icon">👥</div>
            <h1 class="section-title">Team DNA Analysis</h1>
            <p class="section-subtitle">
              Founder profiles and team composition
            </p>
          </div>

          <div class="form-group">
            <label class="form-label">
              Number of Founders <span class="required">*</span>
            </label>
            <input
              type="number"
              class="form-input"
              id="foundersCount"
              min="1"
              max="10"
              placeholder="Enter number"
            />
          </div>

          <div class="form-group">
            <label class="form-label">
              Primary Founder Name <span class="required">*</span>
            </label>
            <input
              type="text"
              class="form-input"
              id="founderName"
              placeholder="Full name"
            />
          </div>

          <div class="form-group">
            <label class="form-label">
              Your Role <span class="required">*</span>
            </label>
            <select class="form-select" id="founderRole">
              <option value="">Select role</option>
              <option value="ceo">CEO - Chief Executive</option>
              <option value="cto">CTO - Chief Technology</option>
              <option value="coo">COO - Chief Operations</option>
              <option value="cmo">CMO - Chief Marketing</option>
              <option value="cfo">CFO - Chief Financial</option>
              <option value="other">Other</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">
              LinkedIn Profile
              <span class="optional-chip">For verification</span>
            </label>
            <div class="input-with-icon">
              <span class="input-icon">🔗</span>
              <input
                type="url"
                class="form-input"
                id="linkedin"
                placeholder="https://linkedin.com/in/yourprofile"
              />
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">
              Total Team Size
              <span class="optional-chip">Including founders</span>
            </label>
            <input
              type="number"
              class="form-input"
              id="teamSize"
              min="1"
              placeholder="Enter team size"
            />
          </div>

          <div class="form-actions">
            <button class="btn btn-secondary" onclick="previousSection()">
              <span>←</span> Previous
            </button>
            <button class="btn btn-primary" onclick="nextSection()">
              Continue <span>→</span>
            </button>
          </div>
        </section>

        <!-- Section 4: Traction Metrics -->
        <section class="form-section" id="section-4">
          <div class="section-header">
            <div class="section-icon">📈</div>
            <h1 class="section-title">Traction Metrics</h1>
            <p class="section-subtitle">
              Share your growth data (all optional)
            </p>
          </div>

          <div class="form-group">
            <label class="form-label">
              Revenue Status
              <span class="optional-chip">Confidential</span>
            </label>
            <select
              class="form-select"
              id="hasRevenue"
              onchange="toggleRevenueFields()"
            >
              <option value="">Prefer not to say</option>
              <option value="no">Pre-revenue</option>
              <option value="yes">Generating revenue</option>
            </select>
          </div>

          <div id="revenueFields" style="display: none">
            <div class="form-group">
              <label class="form-label">
                Monthly Recurring Revenue
                <span class="optional-chip">Range</span>
              </label>
              <select class="form-select" id="mrrRange">
                <option value="">Select range</option>
                <option value="0-1k">$0 - $1K</option>
                <option value="1k-10k">$1K - $10K</option>
                <option value="10k-50k">$10K - $50K</option>
                <option value="50k-100k">$50K - $100K</option>
                <option value="100k-500k">$100K - $500K</option>
                <option value="500k+">$500K+</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">
              Active Users/Customers
              <span class="optional-chip">Total count</span>
            </label>
            <input
              type="number"
              class="form-input"
              id="userCount"
              placeholder="Enter number"
            />
          </div>

          <div class="form-group">
            <label class="form-label">
              Funding Status
              <span class="optional-chip">Previous rounds</span>
            </label>
            <select class="form-select" id="hasRaised">
              <option value="">Prefer not to say</option>
              <option value="no">Bootstrapped</option>
              <option value="pre-seed">Pre-seed raised</option>
              <option value="seed">Seed raised</option>
              <option value="series-a">Series A+</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">
              Key Milestone
              <span class="optional-chip">Your biggest win</span>
            </label>
            <textarea
              class="form-textarea"
              id="milestone"
              placeholder="E.g., First enterprise client, 10K users, Product Hunt launch..."
            ></textarea>
          </div>

          <div class="form-actions">
            <button class="btn btn-secondary" onclick="previousSection()">
              <span>←</span> Previous
            </button>
            <button class="btn btn-primary" onclick="calculateScore()">
              Generate Analysis <span>⚡</span>
            </button>
          </div>
        </section>

        <!-- Section 5: Pulse Analysis Results -->
        <section class="form-section" id="section-5">
          <div class="section-header">
            <div class="section-icon">✨</div>
            <h1 class="section-title">Pulse Analysis Complete</h1>
            <p class="section-subtitle">Your AI-powered assessment results</p>
          </div>

          <div class="score-display">
            <div class="score-orb">
              <div class="score-orb-bg"></div>
              <div class="score-orb-inner">
                <div class="score-value" id="scoreValue">0</div>
                <div class="score-label">Pulse Score</div>
              </div>
            </div>

            <div class="score-message" id="scoreMessage">
              <!-- Dynamic message -->
            </div>

            <div class="data-grid">
              <div class="data-card">
                <div class="data-value" id="dataCompleteness">0%</div>
                <div class="data-label">Data Quality</div>
              </div>
              <div class="data-card">
                <div class="data-value" id="vcMatches">0</div>
                <div class="data-label">VC Matches</div>
              </div>
              <div class="data-card">
                <div class="data-value" id="marketFit">--</div>
                <div class="data-label">Market Fit</div>
              </div>
              <div class="data-card">
                <div class="data-value" id="growthPotential">--</div>
                <div class="data-label">Growth Potential</div>
              </div>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">
              Email for Full Report
              <span class="required">*</span>
            </label>
            <div class="input-with-icon">
              <span class="input-icon">✉️</span>
              <input
                type="email"
                class="form-input"
                id="email"
                placeholder="your@email.com"
              />
            </div>
          </div>

          <div class="form-actions">
            <button class="btn btn-secondary" onclick="downloadReport()">
              <span>📊</span> Download Report
            </button>
            <button class="btn btn-primary" onclick="saveAndContinue()">
              Save & Dashboard <span>→</span>
            </button>
          </div>
        </section>
      </div>
    </main>

    <!-- Notification -->
    <div class="notification" id="notification">
      <div class="notification-icon" id="notificationIcon">ℹ️</div>
      <div class="notification-content">
        <div class="notification-title" id="notificationTitle">
          Notification
        </div>
        <div class="notification-message" id="notificationMessage">Message</div>
      </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
      <div class="quantum-loader">
        <div class="quantum-loader-ring"></div>
        <div class="quantum-loader-ring"></div>
        <div class="quantum-loader-ring"></div>
        <div class="loading-text">Quantum Processing...</div>
      </div>
    </div>

    <!-- Registration Modal -->
    <div class="modal-overlay" id="registrationModal">
      <div class="modal-container">
        <!-- Close button -->
        <button class="modal-close" onclick="closeModal()">×</button>

        <!-- Success Animation -->
        <div class="modal-success-animation">
          <div class="success-orb">
            <div class="success-orb-inner">
              <span class="success-icon">🎉</span>
            </div>
            <div class="success-rings"></div>
          </div>
        </div>

        <!-- Score Display -->
        <div class="modal-score">
          <h2 class="modal-score-title">Your Pulse Score</h2>
          <div class="modal-score-value" id="modalScoreValue">0</div>
          <div class="modal-score-badge">Top 15% of startups</div>
        </div>

        <!-- Value Props -->
        <div class="modal-benefits">
          <h3 class="modal-subtitle">Unlock your personalized dashboard to:</h3>
          <div class="modal-benefit-list">
            <div class="modal-benefit">
              <span class="benefit-icon">🎯</span>
              <div class="benefit-content">
                <strong id="vcCount">31 VCs</strong> match your profile
                <span class="benefit-detail"
                  >See compatibility scores & contact info</span
                >
              </div>
            </div>
            <div class="modal-benefit">
              <span class="benefit-icon">🤖</span>
              <div class="benefit-content">
                <strong>AI-powered weekly insights</strong>
                <span class="benefit-detail"
                  >Personalized recommendations to improve</span
                >
              </div>
            </div>
            <div class="modal-benefit">
              <span class="benefit-icon">📈</span>
              <div class="benefit-content">
                <strong>Track your progress</strong>
                <span class="benefit-detail"
                  >Most founders improve 20+ points in 30 days</span
                >
              </div>
            </div>
          </div>
        </div>

        <!-- Quick Win Preview -->
        <div class="modal-preview">
          <div class="preview-card">
            <span class="preview-label">🔥 Your top VC match</span>
            <div class="preview-content">
              <strong id="topVCName">Andreessen Horowitz</strong>
              <span class="compatibility-score">92% compatibility</span>
            </div>
          </div>
        </div>

        <!-- Auth Buttons -->
        <div class="modal-actions">
          <button class="auth-btn auth-google" onclick="continueWithGoogle()">
            <svg class="auth-icon" viewBox="0 0 24 24" width="20" height="20">
              <path
                fill="#4285F4"
                d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"
              />
              <path
                fill="#34A853"
                d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"
              />
              <path
                fill="#FBBC05"
                d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"
              />
              <path
                fill="#EA4335"
                d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"
              />
            </svg>
            Continue with Google
          </button>

          <button class="auth-btn auth-email" onclick="continueWithEmail()">
            <span class="auth-icon">✉️</span>
            Continue with email
          </button>

          <div class="modal-divider">
            <span>or</span>
          </div>

          <!-- Email Form (Hidden by default) -->
          <div class="email-form" id="emailForm" style="display: none">
            <input
              type="email"
              class="modal-input"
              id="modalEmail"
              placeholder="your@email.com"
              onkeypress="handleEmailKeypress(event)"
            />
            <button class="auth-btn auth-submit" onclick="submitEmail()">
              Create Account <span>→</span>
            </button>
          </div>

          <button class="auth-btn auth-skip" onclick="skipRegistration()">
            Skip for now (lose progress)
          </button>
        </div>

        <!-- Trust Indicators -->
        <div class="modal-footer">
          <div class="trust-indicators">
            <span class="trust-item">🔒 SSL Encrypted</span>
            <span class="trust-item">🚀 2,847 startups</span>
            <span class="trust-item">⚡ Setup in 30s</span>
          </div>
        </div>
      </div>
    </div>

    <script>
      // ============================================
      // XYLENCE STATE MANAGEMENT
      // ============================================
      let currentSection = 1;
      const totalSections = 5;
      let startupData = {
        metadata: {
          id: generatePulseId(),
          createdAt: new Date().toISOString(),
          completeness: 0,
          source: 'pulse_form_v2',
          version: '2.0',
        },
        quickUpload: {
          pitchDeck: null,
          videoPitch: null,
          aiAnalysis: {},
        },
        basicInfo: {},
        team: {},
        traction: {},
        contact: {},
        analysis: {
          score: 0,
          confidence: 'low',
          insights: [],
          predictions: {},
        },
      };

      // Video recording state
      let mediaRecorder = null;
      let recordedChunks = [];
      let recordingTimer = null;
      let secondsRecorded = 0;

      // ============================================
      // INITIALIZATION
      // ============================================
      document.addEventListener('DOMContentLoaded', function () {
        initializeParticles();
        initializeUploads();
        initializeCharCounters();
        loadSavedData();
        updateProgress();

        // Initialize AI processing simulation
        simulateAIProcessing();
      });

      // Particle System
      function initializeParticles() {
        const particlesContainer = document.getElementById('particles');
        for (let i = 0; i < 20; i++) {
          const particle = document.createElement('div');
          particle.className = 'particle';
          particle.style.left = Math.random() * 100 + '%';
          particle.style.animationDelay = Math.random() * 20 + 's';
          particle.style.animationDuration = 15 + Math.random() * 10 + 's';
          particlesContainer.appendChild(particle);
        }
      }

      // AI Processing Simulation
      function simulateAIProcessing() {
        setInterval(() => {
          const statusDot = document.querySelector('.ai-status-dot');
          if (statusDot) {
            statusDot.style.animation = 'none';
            setTimeout(() => {
              statusDot.style.animation = 'aiPulse 2s ease-in-out infinite';
            }, 10);
          }
        }, 5000);
      }

      // ============================================
      // NAVIGATION
      // ============================================
      function nextSection() {
        if (validateCurrentSection()) {
          saveCurrentSection();
          if (currentSection < totalSections) {
            currentSection++;
            showSection(currentSection);
            updateProgress();
          }
        }
      }

      function previousSection() {
        saveCurrentSection();
        if (currentSection > 1) {
          currentSection--;
          showSection(currentSection);
          updateProgress();
        }
      }

      function skipSection() {
        markSectionAsSkipped();
        nextSection();
      }

      function showSection(sectionNumber) {
        // Hide all sections
        document.querySelectorAll('.form-section').forEach((section) => {
          section.classList.remove('active');
        });

        // Show current section
        const targetSection = document.getElementById(
          `section-${sectionNumber}`
        );
        if (targetSection) {
          targetSection.classList.add('active');
        }

        // Update step indicators
        updateStepIndicators(sectionNumber);

        // Scroll to top smoothly
        window.scrollTo({ top: 0, behavior: 'smooth' });

        // Trigger AI analysis if moving to results
        if (sectionNumber === 5) {
          performQuantumAnalysis();
        }
      }

      function updateStepIndicators(currentStep) {
        document.querySelectorAll('.step').forEach((step) => {
          const stepNum = parseInt(step.dataset.step);
          step.classList.remove('active', 'completed');

          if (stepNum < currentStep) {
            step.classList.add('completed');
          } else if (stepNum === currentStep) {
            step.classList.add('active');
          }
        });

        // Update step progress line
        const stepProgress = document.getElementById('stepProgress');
        const progressWidth = ((currentStep - 1) / (totalSections - 1)) * 100;
        stepProgress.style.width = `${progressWidth}%`;
      }

      // ============================================
      // VALIDATION
      // ============================================
      function validateCurrentSection() {
        switch (currentSection) {
          case 1:
            // Upload section - all optional
            return true;
          case 2:
            // Basic info validation
            const name = document.getElementById('startupName').value.trim();
            const industry = document.getElementById('industry').value;
            const stage = document.getElementById('stage').value;

            if (!name || !industry || !stage) {
              showNotification(
                'error',
                'Required Fields',
                'Please complete all required fields'
              );
              return false;
            }
            return true;
          case 3:
            // Team validation
            const foundersCount =
              document.getElementById('foundersCount').value;
            const founderName = document
              .getElementById('founderName')
              .value.trim();
            const founderRole = document.getElementById('founderRole').value;

            if (!foundersCount || !founderName || !founderRole) {
              showNotification(
                'error',
                'Required Fields',
                'Please complete all required fields'
              );
              return false;
            }
            return true;
          case 4:
            // Traction - all optional
            return true;
          case 5:
            // Results - need email
            const email = document.getElementById('email').value.trim();
            if (!email || !validateEmail(email)) {
              showNotification(
                'error',
                'Invalid Email',
                'Please enter a valid email address'
              );
              return false;
            }
            return true;
          default:
            return true;
        }
      }

      function validateEmail(email) {
        const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return re.test(email);
      }

      // ============================================
      // DATA MANAGEMENT
      // ============================================
      function saveCurrentSection() {
        switch (currentSection) {
          case 1:
            // Upload data saved in real-time
            break;
          case 2:
            startupData.basicInfo = {
              name: document.getElementById('startupName').value.trim(),
              tagline: document.getElementById('tagline').value.trim(),
              industry: document.getElementById('industry').value,
              stage: document.getElementById('stage').value,
              problem: document.getElementById('problem').value.trim(),
            };
            break;
          case 3:
            startupData.team = {
              foundersCount:
                parseInt(document.getElementById('foundersCount').value) || 0,
              founderName: document.getElementById('founderName').value.trim(),
              founderRole: document.getElementById('founderRole').value,
              linkedin: document.getElementById('linkedin').value.trim(),
              teamSize:
                parseInt(document.getElementById('teamSize').value) || 0,
            };
            break;
          case 4:
            startupData.traction = {
              hasRevenue: document.getElementById('hasRevenue').value,
              mrrRange: document.getElementById('mrrRange').value,
              userCount:
                parseInt(document.getElementById('userCount').value) || 0,
              hasRaised: document.getElementById('hasRaised').value,
              milestone: document.getElementById('milestone').value.trim(),
            };
            break;
          case 5:
            startupData.contact.email = document
              .getElementById('email')
              .value.trim();
            break;
        }

        // Update metadata
        startupData.metadata.updatedAt = new Date().toISOString();
        startupData.metadata.completeness = calculateCompleteness();

        // Save to localStorage
        saveToLocalStorage();
      }

      function saveToLocalStorage() {
        try {
          localStorage.setItem(
            'xylenceStartupData',
            JSON.stringify(startupData)
          );
        } catch (e) {
          console.error('Error saving to localStorage:', e);
        }
      }

      function loadSavedData() {
        try {
          const saved = localStorage.getItem('xylenceStartupData');
          if (saved) {
            startupData = JSON.parse(saved);
            populateForms();
          }
        } catch (e) {
          console.error('Error loading saved data:', e);
        }
      }

      function populateForms() {
        // Basic Info
        if (startupData.basicInfo) {
          document.getElementById('startupName').value =
            startupData.basicInfo.name || '';
          document.getElementById('tagline').value =
            startupData.basicInfo.tagline || '';
          document.getElementById('industry').value =
            startupData.basicInfo.industry || '';
          document.getElementById('stage').value =
            startupData.basicInfo.stage || '';
          document.getElementById('problem').value =
            startupData.basicInfo.problem || '';
          updateCharCounter('tagline', 'taglineCounter');
        }

        // Team
        if (startupData.team) {
          document.getElementById('foundersCount').value =
            startupData.team.foundersCount || '';
          document.getElementById('founderName').value =
            startupData.team.founderName || '';
          document.getElementById('founderRole').value =
            startupData.team.founderRole || '';
          document.getElementById('linkedin').value =
            startupData.team.linkedin || '';
          document.getElementById('teamSize').value =
            startupData.team.teamSize || '';
        }

        // Traction
        if (startupData.traction) {
          document.getElementById('hasRevenue').value =
            startupData.traction.hasRevenue || '';
          document.getElementById('mrrRange').value =
            startupData.traction.mrrRange || '';
          document.getElementById('userCount').value =
            startupData.traction.userCount || '';
          document.getElementById('hasRaised').value =
            startupData.traction.hasRaised || '';
          document.getElementById('milestone').value =
            startupData.traction.milestone || '';
          toggleRevenueFields();
        }
      }

      function calculateCompleteness() {
        let totalFields = 0;
        let filledFields = 0;

        // Count fields
        const countObject = (obj) => {
          for (let key in obj) {
            if (obj[key] !== null && obj[key] !== undefined) {
              if (typeof obj[key] === 'object' && !Array.isArray(obj[key])) {
                countObject(obj[key]);
              } else {
                totalFields++;
                if (obj[key] !== '' && obj[key] !== 0) {
                  filledFields++;
                }
              }
            }
          }
        };

        countObject(startupData);
        return totalFields > 0
          ? Math.round((filledFields / totalFields) * 100)
          : 0;
      }

      function markSectionAsSkipped() {
        if (!startupData.metadata.skippedSections) {
          startupData.metadata.skippedSections = [];
        }
        startupData.metadata.skippedSections.push(currentSection);
        saveToLocalStorage();
      }

      // ============================================
      // FILE UPLOAD HANDLERS
      // ============================================
      function initializeUploads() {
        const deckUploadArea = document.getElementById('deckUploadArea');
        const deckInput = document.getElementById('deckInput');

        if (!deckUploadArea || !deckInput) return;

        // Click to upload
        deckUploadArea.addEventListener('click', () => {
          deckInput.click();
        });

        // Drag and drop events
        deckUploadArea.addEventListener('dragover', (e) => {
          e.preventDefault();
          deckUploadArea.classList.add('dragover');
        });

        deckUploadArea.addEventListener('dragleave', () => {
          deckUploadArea.classList.remove('dragover');
        });

        deckUploadArea.addEventListener('drop', (e) => {
          e.preventDefault();
          deckUploadArea.classList.remove('dragover');

          const file = e.dataTransfer.files[0];
          if (file) {
            handleDeckUpload(file);
          }
        });

        // File input change
        deckInput.addEventListener('change', (e) => {
          const file = e.target.files[0];
          if (file) {
            handleDeckUpload(file);
          }
        });
      }

      async function handleDeckUpload(file) {
        // Validate file
        const validTypes = [
          'application/pdf',
          'application/vnd.ms-powerpoint',
          'application/vnd.openxmlformats-officedocument.presentationml.presentation',
        ];

        if (!validTypes.includes(file.type)) {
          showNotification(
            'error',
            'Invalid File',
            'Please upload PDF, PPT or PPTX files only'
          );
          return;
        }

        if (file.size > 20 * 1024 * 1024) {
          showNotification(
            'error',
            'File Too Large',
            'Maximum file size is 20MB'
          );
          return;
        }

        // Show loading
        showLoading(true);

        // Store file data
        startupData.quickUpload.pitchDeck = {
          name: file.name,
          size: file.size,
          type: file.type,
          uploadedAt: new Date().toISOString(),
        };

        // Display uploaded file
        const display = document.getElementById('deckFileDisplay');
        display.innerHTML = `
                <div class="uploaded-file">
                    <div class="file-info">
                        <div class="file-icon">📄</div>
                        <div class="file-details">
                            <div class="file-name">${file.name}</div>
                            <div class="file-meta">
                                <span>${formatFileSize(file.size)}</span>
                                <span>•</span>
                                <span>Uploaded just now</span>
                            </div>
                        </div>
                    </div>
                    <button class="remove-file" onclick="removeDeck()">Remove</button>
                </div>
            `;

        // Simulate AI analysis
        await simulateAIAnalysis('deck');

        // Hide loading
        showLoading(false);

        // Save data
        saveToLocalStorage();
      }

      function removeDeck() {
        startupData.quickUpload.pitchDeck = null;
        document.getElementById('deckFileDisplay').innerHTML = '';
        document.getElementById('deckAnalysis').innerHTML = '';
        document.getElementById('deckAnalysis').classList.remove('active');
        saveToLocalStorage();
      }

      async function simulateAIAnalysis(type) {
        // Simulate processing time
        await new Promise((resolve) => setTimeout(resolve, 1500));

        if (type === 'deck') {
          const analysisDiv = document.getElementById('deckAnalysis');
          analysisDiv.innerHTML = `
                    <div class="ai-header">
                        <span>🤖</span>
                        <span>Pulse AI Analysis</span>
                    </div>
                    <div class="ai-insights">
                        <span class="insight-chip">✓ 12 slides detected</span>
                        <span class="insight-chip">✓ Problem clearly defined</span>
                        <span class="insight-chip">✓ Market size: $2.5B TAM</span>
                        <span class="insight-chip">⚡ Team slide needs expansion</span>
                    </div>
                `;
          analysisDiv.classList.add('active');

          // Store analysis
          startupData.quickUpload.aiAnalysis.deck = {
            slides: 12,
            quality: 'good',
            insights: ['Problem clear', 'Market defined', 'Team incomplete'],
          };
        }
      }

      // ============================================
      // VIDEO RECORDING
      // ============================================
      document
        .getElementById('recordBtn')
        ?.addEventListener('click', toggleRecording);

      async function toggleRecording() {
        const recordBtn = document.getElementById('recordBtn');
        const videoPreview = document.getElementById('videoPreview');
        const timer = document.getElementById('timer');
        const recordText = document.getElementById('recordText');
        const recordIcon = document.getElementById('recordIcon');

        if (!mediaRecorder || mediaRecorder.state === 'inactive') {
          try {
            const stream = await navigator.mediaDevices.getUserMedia({
              video: true,
              audio: true,
            });

            videoPreview.srcObject = stream;
            videoPreview.style.display = 'block';
            videoPreview.play();

            mediaRecorder = new MediaRecorder(stream);
            recordedChunks = [];

            mediaRecorder.ondataavailable = (event) => {
              if (event.data.size > 0) {
                recordedChunks.push(event.data);
              }
            };

            mediaRecorder.onstop = async () => {
              const blob = new Blob(recordedChunks, { type: 'video/webm' });
              const url = URL.createObjectURL(blob);
              videoPreview.srcObject = null;
              videoPreview.src = url;

              // Save video data
              startupData.quickUpload.videoPitch = {
                duration: secondsRecorded,
                recordedAt: new Date().toISOString(),
                size: blob.size,
              };

              // Simulate video analysis
              await simulateVideoAnalysis();

              saveToLocalStorage();
            };

            mediaRecorder.start();
            recordBtn.classList.add('recording');
            recordIcon.textContent = '⏹';
            recordText.textContent = 'Stop Recording';
            timer.style.display = 'flex';

            // Start timer
            secondsRecorded = 0;
            recordingTimer = setInterval(() => {
              secondsRecorded++;
              const minutes = Math.floor(secondsRecorded / 60);
              const seconds = secondsRecorded % 60;
              document.getElementById('timerText').textContent = `${minutes
                .toString()
                .padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

              // Max 5 minutes
              if (secondsRecorded >= 300) {
                toggleRecording();
              }
            }, 1000);
          } catch (err) {
            console.error('Error accessing camera:', err);
            showNotification(
              'error',
              'Camera Access',
              'Unable to access camera. Please check permissions.'
            );
          }
        } else {
          // Stop recording
          mediaRecorder.stop();
          mediaRecorder.stream.getTracks().forEach((track) => track.stop());

          recordBtn.classList.remove('recording');
          recordIcon.textContent = '🎥';
          recordText.textContent = 'Record Again';
          timer.style.display = 'none';

          clearInterval(recordingTimer);
        }
      }

      async function simulateVideoAnalysis() {
        await new Promise((resolve) => setTimeout(resolve, 2000));

        const analysisDiv = document.getElementById('videoAnalysis');
        analysisDiv.innerHTML = `
                <div class="ai-header">
                    <span>🧠</span>
                    <span>Behavioral Analysis</span>
                </div>
                <div class="ai-insights">
                    <span class="insight-chip">✓ Clear communication</span>
                    <span class="insight-chip">✓ High confidence: 85%</span>
                    <span class="insight-chip">✓ Good eye contact</span>
                    <span class="insight-chip">⚡ Pace: Optimal</span>
                </div>
            `;
        analysisDiv.classList.add('active');

        startupData.quickUpload.aiAnalysis.video = {
          duration: secondsRecorded,
          confidence: 85,
          clarity: 'high',
          insights: [
            'Clear communication',
            'High confidence',
            'Good presentation',
          ],
        };
      }

      // ============================================
      // QUANTUM SCORE CALCULATION
      // ============================================
      function calculateScore() {
        saveCurrentSection();
        currentSection = 5;
        showSection(5);
        updateProgress();
      }

      async function performQuantumAnalysis() {
        showLoading(true);

        // Calculate score based on data
        let score = 0;
        let factors = [];

        // Basic scoring algorithm
        if (startupData.basicInfo.name) score += 5;
        if (startupData.basicInfo.industry) score += 5;
        if (startupData.basicInfo.stage) {
          score += 5;
          const advancedStages = ['launched', 'scaling', 'beta'];
          if (advancedStages.includes(startupData.basicInfo.stage)) {
            score += 15;
          }
        }

        // Team scoring
        if (startupData.team.foundersCount > 1) score += 15;
        if (startupData.team.linkedin) score += 5;
        if (startupData.team.teamSize > 5) score += 10;

        // Traction scoring
        if (startupData.traction.hasRevenue === 'yes') score += 25;
        if (startupData.traction.userCount > 100) score += 10;
        if (startupData.traction.userCount > 1000) score += 10;
        if (['seed', 'series-a'].includes(startupData.traction.hasRaised))
          score += 20;

        // Upload bonuses
        if (startupData.quickUpload.pitchDeck) score += 10;
        if (startupData.quickUpload.videoPitch) score += 10;

        // Ensure minimum score for demo
        score = Math.max(score, 45 + Math.floor(Math.random() * 25));
        score = Math.min(100, score);

        startupData.analysis.score = score;
        startupData.analysis.calculatedAt = new Date().toISOString();

        // Simulate processing
        await new Promise((resolve) => setTimeout(resolve, 2000));

        showLoading(false);

        // Animate score display
        animateScore(score);
        displayMetrics(score);
      }

      function animateScore(targetScore) {
        const scoreValue = document.getElementById('scoreValue');
        const scoreMessage = document.getElementById('scoreMessage');

        let currentScore = 0;
        const increment = targetScore / 50;
        const timer = setInterval(() => {
          currentScore += increment;
          if (currentScore >= targetScore) {
            currentScore = targetScore;
            clearInterval(timer);

            // Show message
            scoreMessage.innerHTML = getScoreMessage(targetScore);
          }
          scoreValue.textContent = Math.round(currentScore);
        }, 30);
      }

      function getScoreMessage(score) {
        if (score >= 85) {
          return '🚀 <strong>Exceptional!</strong> Your startup shows unicorn potential. Top 5% of assessments.';
        } else if (score >= 70) {
          return '⚡ <strong>Strong Performance!</strong> High probability of successful funding. VC-ready profile.';
        } else if (score >= 55) {
          return '📈 <strong>Solid Foundation!</strong> Good trajectory with room for optimization. Focus on traction metrics.';
        } else {
          return '💡 <strong>Early Stage Potential!</strong> Continue building and complete more sections for accurate analysis.';
        }
      }

      function displayMetrics(score) {
        // Data completeness
        document.getElementById('dataCompleteness').textContent =
          startupData.metadata.completeness + '%';

        // VC Matches (simulated)
        const vcMatches = Math.floor((score / 100) * 47);
        document.getElementById('vcMatches').textContent = vcMatches;

        // Market Fit
        const marketFit =
          score >= 70 ? 'Strong' : score >= 50 ? 'Moderate' : 'Developing';
        document.getElementById('marketFit').textContent = marketFit;

        // Growth Potential
        const growth =
          score >= 80 ? 'Very High' : score >= 60 ? 'High' : 'Medium';
        document.getElementById('growthPotential').textContent = growth;
      }

      // ============================================
      // UI UTILITIES
      // ============================================
      function updateProgress() {
        const completeness = calculateCompleteness();
        const progressRing = document.getElementById('progressRing');
        const progressPercentage =
          document.getElementById('progressPercentage');

        // Update ring
        const circumference = 2 * Math.PI * 65;
        const offset = circumference - (completeness / 100) * circumference;
        progressRing.style.strokeDashoffset = offset;

        // Update percentage
        progressPercentage.textContent = completeness + '%';
      }

      function initializeCharCounters() {
        const tagline = document.getElementById('tagline');
        if (tagline) {
          tagline.addEventListener('input', () => {
            updateCharCounter('tagline', 'taglineCounter');
          });
        }
      }

      function updateCharCounter(inputId, counterId) {
        const input = document.getElementById(inputId);
        const counter = document.getElementById(counterId);
        if (input && counter) {
          counter.textContent = input.value.length;

          // Add warning class if near limit
          const parent = counter.parentElement;
          if (input.value.length > input.maxLength * 0.9) {
            parent.classList.add('warning');
          } else {
            parent.classList.remove('warning');
          }
        }
      }

      function toggleRevenueFields() {
        const hasRevenue = document.getElementById('hasRevenue').value;
        const revenueFields = document.getElementById('revenueFields');

        if (hasRevenue === 'yes') {
          revenueFields.style.display = 'block';
        } else {
          revenueFields.style.display = 'none';
        }
      }

      function showNotification(type, title, message) {
        const notification = document.getElementById('notification');
        const notificationIcon = document.getElementById('notificationIcon');
        const notificationTitle = document.getElementById('notificationTitle');
        const notificationMessage = document.getElementById(
          'notificationMessage'
        );

        // Set content
        notificationTitle.textContent = title;
        notificationMessage.textContent = message;

        // Set type
        notification.className = `notification ${type} show`;

        // Set icon
        const icons = {
          success: '✅',
          error: '❌',
          info: 'ℹ️',
          warning: '⚠️',
        };
        notificationIcon.textContent = icons[type] || icons.info;

        // Auto hide after 5 seconds
        setTimeout(() => {
          notification.classList.remove('show');
        }, 5000);
      }

      function showLoading(show) {
        const loadingOverlay = document.getElementById('loadingOverlay');
        if (show) {
          loadingOverlay.classList.add('active');
        } else {
          loadingOverlay.classList.remove('active');
        }
      }

      function formatFileSize(bytes) {
        if (bytes < 1024) return bytes + ' B';
        if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
        return (bytes / (1024 * 1024)).toFixed(1) + ' MB';
      }

      function generatePulseId() {
        const timestamp = Date.now().toString(36);
        const randomStr = Math.random().toString(36).substr(2, 9);
        return `qntm_${timestamp}_${randomStr}`;
      }

      // ============================================
      // DATA EXPORT & SAVE WITH REGISTRATION
      // ============================================
      async function saveAndContinue() {
        const email = document.getElementById('email').value.trim();

        if (!email || !validateEmail(email)) {
          showNotification(
            'error',
            'Email Required',
            'Please enter a valid email address'
          );
          return;
        }

        startupData.contact.email = email;
        saveCurrentSection();

        // Show the registration modal instead of saving directly
        showRegistrationModal();
      }

      function showRegistrationModal() {
        const modal = document.getElementById('registrationModal');
        const score = startupData.analysis.score;

        // Update modal with actual data
        document.getElementById('modalScoreValue').textContent = score;

        // Update VC count based on score
        const vcCount = Math.floor((score / 100) * 47) + 10;
        document.getElementById('vcCount').textContent = `${vcCount} VCs`;

        // Select top VC based on industry
        const topVCs = {
          ai_ml: 'Andreessen Horowitz',
          fintech: 'Sequoia Capital',
          healthtech: 'NEA',
          saas: 'Bessemer Venture Partners',
          marketplace: 'Accel',
          web3: 'Paradigm',
          climate: 'Breakthrough Energy',
          other: 'Y Combinator',
        };

        const topVC =
          topVCs[startupData.basicInfo.industry] || 'Index Ventures';
        document.getElementById('topVCName').textContent = topVC;

        // Animate score counting
        animateModalScore(score);

        // Show modal
        modal.classList.add('active');
      }

      function animateModalScore(targetScore) {
        const scoreElement = document.getElementById('modalScoreValue');
        let currentScore = 0;
        const increment = targetScore / 30;

        const timer = setInterval(() => {
          currentScore += increment;
          if (currentScore >= targetScore) {
            currentScore = targetScore;
            clearInterval(timer);
          }
          scoreElement.textContent = Math.round(currentScore);
        }, 30);
      }

      function closeModal() {
        const modal = document.getElementById('registrationModal');
        modal.classList.remove('active');
      }

      async function continueWithGoogle() {
        showLoading(true);

        // Store data before OAuth
        sessionStorage.setItem(
          'pendingStartupData',
          JSON.stringify(startupData)
        );

        // Simulate Google OAuth (in production, use real OAuth)
        await simulateOAuth('google');
      }

      function continueWithEmail() {
        // Toggle email form
        const emailForm = document.getElementById('emailForm');
        const modalEmail = document.getElementById('modalEmail');

        if (emailForm.style.display === 'none') {
          emailForm.style.display = 'flex';
          modalEmail.value = startupData.contact.email || '';
          modalEmail.focus();
        } else {
          emailForm.style.display = 'none';
        }
      }

      function handleEmailKeypress(event) {
        if (event.key === 'Enter') {
          submitEmail();
        }
      }

      async function submitEmail() {
        const email = document.getElementById('modalEmail').value.trim();

        if (!email || !validateEmail(email)) {
          showNotification(
            'error',
            'Invalid Email',
            'Please enter a valid email address'
          );
          return;
        }

        showLoading(true);

        // Create account with email
        await createAccount({
          email: email,
          startupData: startupData,
        });
      }

      function skipRegistration() {
        if (
          confirm("Are you sure? You'll lose all your progress and analysis.")
        ) {
          // Clear data and redirect
          localStorage.removeItem('xylenceStartupData');
          sessionStorage.clear();
          window.location.href = '/';
        }
      }

      async function simulateOAuth(provider) {
        // In production, implement real OAuth flow
        // For demo, simulate a successful auth
        await new Promise((resolve) => setTimeout(resolve, 2000));

        const userData = {
          provider: provider,
          email:
            provider === 'google'
              ? 'user@gmail.com'
              : startupData.contact.email,
          name: startupData.team.founderName || 'Founder',
          id: generatePulseId(),
        };

        await createAccount(userData);
      }

      async function createAccount(userData) {
        try {
          // Combine user data with startup data
          const completeData = {
            user: userData,
            startup: startupData,
            createdAt: new Date().toISOString(),
          };

          // Simulate API call to create account
          await new Promise((resolve) => setTimeout(resolve, 1500));

          console.log('Account created:', completeData);

          // Store auth token (in production, get from backend)
          localStorage.setItem('authToken', 'pulse_' + generatePulseId());
          localStorage.setItem('userData', JSON.stringify(userData));

          // Clear temporary data
          localStorage.removeItem('pulseStartupData');
          sessionStorage.removeItem('pendingStartupData');

          showLoading(false);

          // Show success and redirect
          showNotification(
            'success',
            'Account Created!',
            'Redirecting to your dashboard...'
          );

          // Redirect to dashboard after delay
          setTimeout(() => {
            // In production, redirect to actual dashboard
            console.log('Redirect to dashboard with quick win');
            // window.location.href = '/dashboard';

            // For demo, show success state
            showDashboardPreview();
          }, 2000);
        } catch (error) {
          showLoading(false);
          showNotification(
            'error',
            'Error',
            'Failed to create account. Please try again.'
          );
          console.error('Account creation error:', error);
        }
      }

      function showDashboardPreview() {
        // Replace modal content with dashboard preview
        const modal = document.getElementById('registrationModal');
        const container = modal.querySelector('.modal-container');

        container.innerHTML = `
                <div class="dashboard-preview">
                    <div class="preview-header">
                        <h2 class="preview-title">🎉 Welcome to Your Dashboard!</h2>
                        <p class="preview-subtitle">Here's your first quick win:</p>
                    </div>
                    
                    <div class="quick-win-card">
                        <div class="qw-badge">🔥 HOT MATCH</div>
                        <div class="qw-content">
                            <h3>${
                              document.getElementById('topVCName').textContent
                            }</h3>
                            <div class="qw-metric">
                                <span>92% Compatibility</span>
                                <span class="qw-dot">•</span>
                                <span>Actively investing</span>
                            </div>
                            <p class="qw-reason">
                                They've invested in 3 similar startups in your stage and industry. 
                                Perfect timing - they just closed a new $500M fund.
                            </p>
                            <a href="/mvp-xylence/echo/index.html" class="btn btn-primary" style="width: 100%; margin-top: 1rem;">
                                View Full Dashboard →
                            </a>
                        </div>
                    </div>
                    
                    <div class="preview-stats">
                        <div class="stat-mini">
                            <span class="stat-mini-value">${
                              startupData.analysis.score
                            }</span>
                            <span class="stat-mini-label">Your Score</span>
                        </div>
                        <div class="stat-mini">
                            <span class="stat-mini-value">${
                              Math.floor(
                                (startupData.analysis.score / 100) * 47
                              ) + 10
                            }</span>
                            <span class="stat-mini-label">VC Matches</span>
                        </div>
                        <div class="stat-mini">
                            <span class="stat-mini-value">Top 15%</span>
                            <span class="stat-mini-label">Ranking</span>
                        </div>
                    </div>
                </div>
            `;
      }

      async function sendToBackend(data) {
        // In production, replace with actual API call
        const apiEndpoint = 'https://xylence.ai/api/v2/startups';

        try {
          // Simulated API call
          await new Promise((resolve) => setTimeout(resolve, 1500));

          console.log('Data sent to backend:', data);

          // Clear local storage after successful save
          localStorage.removeItem('xylenceStartupData');

          return { success: true, id: data.metadata.id };
        } catch (error) {
          console.error('Error saving data:', error);
          showNotification('error', 'Save Failed', 'Please try again');
          throw error;
        }
      }

      function downloadReport() {
        const reportData = {
          ...startupData,
          generatedAt: new Date().toISOString(),
          reportVersion: '2.0',
        };

        const dataStr = JSON.stringify(reportData, null, 2);
        const dataUri =
          'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);

        const linkElement = document.createElement('a');
        linkElement.setAttribute('href', dataUri);
        linkElement.setAttribute(
          'download',
          `quantum_report_${startupData.metadata.id}.json`
        );
        linkElement.click();

        showNotification(
          'success',
          'Report Downloaded',
          'Check your downloads folder'
        );
      }

      // ============================================
      // KEYBOARD SHORTCUTS
      // ============================================
      document.addEventListener('keydown', (e) => {
        // Cmd/Ctrl + Enter to continue
        if ((e.metaKey || e.ctrlKey) && e.key === 'Enter') {
          if (currentSection < totalSections) {
            nextSection();
          } else if (currentSection === totalSections) {
            saveAndContinue();
          }
        }

        // Escape to close notifications
        if (e.key === 'Escape') {
          document.getElementById('notification').classList.remove('show');
        }
      });

      // ============================================
      // AUTO-SAVE
      // ============================================
      let autoSaveTimer;
      document.addEventListener('input', () => {
        clearTimeout(autoSaveTimer);
        autoSaveTimer = setTimeout(() => {
          saveCurrentSection();
          console.log('Auto-saved');
        }, 2000);
      });
    </script>
  </body>
</html>
